{% extends 'base.html' %}

{% block title %}Available Upcycling Requests{% endblock %}

{% block content %}
<style>
    /* Basic styling for demonstration, replace with your actual CSS */
    .artisan-requests-container { max-width: 900px; margin: 30px auto; padding: 25px; background-color: #fff; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
    h1 { color: #333; border-bottom: 2px solid #eee; padding-bottom: 10px; margin-bottom: 20px; }
    .request-card {
        border: 1px solid #ddd;
        border-radius: 8px;
        padding: 15px;
        margin-bottom: 15px;
        background-color: #e6f7ff; /* Light blue for available requests */
        box-shadow: 0 1px 3px rgba(0,0,0,0.05);
    }
    .request-card h3 { margin-top: 0; color: #0056b3; }
    .request-card p { margin-bottom: 5px; }
    .request-card a {
        display: inline-block;
        margin-top: 10px;
        background-color: #007bff;
        color: white;
        padding: 8px 15px;
        border-radius: 5px;
        text-decoration: none;
    }
    .request-card a:hover {
        background-color: #0056b3;
    }
    .no-requests { text-align: center; color: #666; padding: 20px; border: 1px dashed #ccc; border-radius: 8px; }
</style>

<div class="artisan-requests-container">
    <h1>Available Upcycling Requests for Artisans</h1>

    {% if available_requests %}
        {% for request in available_requests %}
            <div class="request-card">
                <h3>{{ request.product_type }} <small>(ID: {{ request.id }})</small></h3>
                <p><strong>Material Details:</strong> {{ request.material_details|truncatechars:100 }}</p>
                <p><strong>Pickup Location:</strong> {{ request.pickup_location }}</p>
                <p><strong>Budget:</strong> {% if request.budget %}${{ request.budget }}{% else %}Not specified{% endif %}</p>
                <p><strong>Submitted On:</strong> {{ request.created_at|date:"F d, Y P" }}</p>
                <a href="{% url 'request_detail' request_id=request.id %}">View Details & Make Offer</a> {# This link will be updated later #}
            </div>
        {% endfor %}
    {% else %}
        <div class="no-requests">
            <p>No new upcycling requests are currently available.</p>
            <p>Check back later!</p>
        </div>
    {% endif %}
</div>
{% endblock %}