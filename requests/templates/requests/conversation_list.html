{% extends 'base.html' %} {# This extends your main base layout template #}

{% block content %}
    <h2>Your Conversations</h2>
    {% if messages %} {# Django messages framework #}
        {% for message in messages %}
            <div class="alert alert-{{ message.tags }}">
                {{ message }}
            </div>
        {% endfor %}
    {% endif %}

    {% if conversations %}
        <ul style="list-style-type: none; padding: 0;">
            {% for conversation in conversations %}
                <li style="margin-bottom: 10px; border: 1px solid #eee; padding: 10px; border-radius: 5px;">
                    <a href="{% url 'conversation_detail' conversation.id %}" style="text-decoration: none; color: inherit; display: block;">
                        <strong style="color: #333;">
                            Conversation with
                            {% if conversation.participant1 == request.user %}
                                {{ conversation.participant2.username }}
                            {% else %}
                                {{ conversation.participant1.username }}
                            {% endif %}
                        </strong>
                        {% if conversation.upcycling_request %}
                            <br><small style="color: #666;">About Request #{{ conversation.upcycling_request.id }} - {{ conversation.upcycling_request.product_type }}</small>
                        {% endif %}
                        <br><small style="color: #999;">Last updated: {{ conversation.updated_at|date:"M d, Y H:i" }}</small>
                    </a>
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>You have no active conversations yet. Conversations are typically started when an offer is accepted.</p>
    {% endif %}
{% endblock content %}